## 事务处理或者分析？

在业务数据处理的早期，对数据库的写入通常与发生的商业交易相对应：进行销售，向供应商下单，支付员工工资等。随着数据库的扩展，并不涉及货币交易的增加，事务一次却停滞不前，指的是一组交易的读取和写入

> 事务不必要有ACID特性。事务处理仅仅意味着允许客户端低延迟读写----与批处理任务不同。我们在第7章讨论ACID特性，在第10章讨论批处理

即使数据库开始用于许多不同类型的数据---博客的评论，游戏中的动作，地址簿中的联系人等，基本访问模式还是类似于处理业务交易。应用程序通常需要使用索引或者键来查询少量记录。记录的插入和更新基于用户的输入。因为这些应用程序是交互式的，因此这种访问模式被称为online transaction processing(OLTP)。

然而，数据库也越来越多用于数据分析，这具有不同的数据分析。通常，分析查询需要扫描大量记录，仅读取每条记录的几列，然后计算汇总统计信息（比如计数，总和以及平均值）而不是返回原始数据给用户。比如，如果你的数据是销售交易表，则分析查询可能是：

- 一月份我们每家商店的总收入是多少
- 我们最近促销期间卖出的香蕉比平时多了多少
- 哪个品牌的婴儿食品最常与X品牌的尿布一起购买

这些查询通常由业务分析师编写，有助于公司管理层作出更好的决策（业务职能的报告）。为了将这种使用数据库的模式与事务处理分开，被称为online analytic processing(OLAP)。在OLTP和OLAP之间的区别并不总是很明确，但是下表列出了一些典型特征：

| Property     | OLTP                             | OLAP                   |
| ------------ | -------------------------------- | ---------------------- |
| 主要读模式   | 每个查询少量记录，通过键         | 统计大量记录           |
| 主要写模式   | 随机访问、通过用户输入低延迟写入 | ETL或者时间流          |
| 优先被谁使用 | 终端用户，通过web应用            | 内部分析，为了决策支持 |
| 数据表征什么 | 最新的数据                       | 一段时间的事件历史     |
| 数据库规模   | GB或者TB                         | TB或者PB               |

首先，将相同的数据库用于事务处理和分析查询。事实证明，SQL在这方面相当灵活：它对于OLTP类型的查询和OLAP类型的查询都适用。尽管如此，在1980年代和1990年代初，公司有一种趋势是停止适用OLTP系统进行分析，改为单独的数据库来分析。这个独立的数据库被称为数据仓库。

### 数据仓库